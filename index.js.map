{"version":3,"file":"index.js","sources":["mqttws31.js"],"sourcesContent":["/*******************************************************************************\r\n * Copyright (c) 2013 IBM Corp.\r\n *\r\n * All rights reserved. This program and the accompanying materials\r\n * are made available under the terms of the Eclipse Public License v1.0\r\n * and Eclipse Distribution License v1.0 which accompany this distribution. \r\n *\r\n * The Eclipse Public License is available at \r\n *    http://www.eclipse.org/legal/epl-v10.html\r\n * and the Eclipse Distribution License is available at \r\n *   http://www.eclipse.org/org/documents/edl-v10.php.\r\n *\r\n * Contributors:\r\n *    Andrew Banks - initial API and implementation and initial documentation\r\n *******************************************************************************/\r\n\r\n\r\n// Only expose a single object name in the global namespace.\r\n// Everything must go through this module. Global Paho.MQTT module\r\n// only has a single public function, client, which returns\r\n// a Paho.MQTT client object given connection details.\r\n \r\n/**\r\n * Send and receive messages using web browsers.\r\n * <p> \r\n * This programming interface lets a JavaScript client application use the MQTT V3.1 or\r\n * V3.1.1 protocol to connect to an MQTT-supporting messaging server.\r\n *  \r\n * The function supported includes:\r\n * <ol>\r\n * <li>Connecting to and disconnecting from a server. The server is identified by its host name and port number. \r\n * <li>Specifying options that relate to the communications link with the server, \r\n * for example the frequency of keep-alive heartbeats, and whether SSL/TLS is required.\r\n * <li>Subscribing to and receiving messages from MQTT Topics.\r\n * <li>Publishing messages to MQTT Topics.\r\n * </ol>\r\n * <p>\r\n * The API consists of two main objects:\r\n * <dl>\r\n * <dt><b>{@link Paho.MQTT.Client}</b></dt>\r\n * <dd>This contains methods that provide the functionality of the API,\r\n * including provision of callbacks that notify the application when a message\r\n * arrives from or is delivered to the messaging server,\r\n * or when the status of its connection to the messaging server changes.</dd>\r\n * <dt><b>{@link Paho.MQTT.Message}</b></dt>\r\n * <dd>This encapsulates the payload of the message along with various attributes\r\n * associated with its delivery, in particular the destination to which it has\r\n * been (or is about to be) sent.</dd>\r\n * </dl> \r\n * <p>\r\n * The programming interface validates parameters passed to it, and will throw\r\n * an Error containing an error message intended for developer use, if it detects\r\n * an error with any parameter.\r\n * <p>\r\n * Example:\r\n * \r\n * <code><pre>\r\nclient = new Paho.MQTT.Client(location.hostname, Number(location.port), \"clientId\");\r\nclient.onConnectionLost = onConnectionLost;\r\nclient.onMessageArrived = onMessageArrived;\r\nclient.connect({onSuccess:onConnect});\r\n\r\nfunction onConnect() {\r\n  // Once a connection has been made, make a subscription and send a message.\r\n  console.log(\"onConnect\");\r\n  client.subscribe(\"/World\");\r\n  message = new Paho.MQTT.Message(\"Hello\");\r\n  message.destinationName = \"/World\";\r\n  client.send(message); \r\n};\r\nfunction onConnectionLost(responseObject) {\r\n  if (responseObject.errorCode !== 0)\r\n\tconsole.log(\"onConnectionLost:\"+responseObject.errorMessage);\r\n};\r\nfunction onMessageArrived(message) {\r\n  console.log(\"onMessageArrived:\"+message.payloadString);\r\n  client.disconnect(); \r\n};\t\r\n * </pre></code>\r\n * @namespace Paho.MQTT \r\n */\r\n\r\nif (typeof Paho === \"undefined\") {\r\n\tPaho = {};\r\n}\r\n\r\nPaho.MQTT = (function (global) {\r\n\r\n\t// Private variables below, these are only visible inside the function closure\r\n\t// which is used to define the module. \r\n\r\n\tvar version = \"@VERSION@\";\r\n\tvar buildLevel = \"@BUILDLEVEL@\";\r\n\t\r\n\t/** \r\n\t * Unique message type identifiers, with associated\r\n\t * associated integer values.\r\n\t * @private \r\n\t */\r\n\tvar MESSAGE_TYPE = {\r\n\t\tCONNECT: 1, \r\n\t\tCONNACK: 2, \r\n\t\tPUBLISH: 3,\r\n\t\tPUBACK: 4,\r\n\t\tPUBREC: 5, \r\n\t\tPUBREL: 6,\r\n\t\tPUBCOMP: 7,\r\n\t\tSUBSCRIBE: 8,\r\n\t\tSUBACK: 9,\r\n\t\tUNSUBSCRIBE: 10,\r\n\t\tUNSUBACK: 11,\r\n\t\tPINGREQ: 12,\r\n\t\tPINGRESP: 13,\r\n\t\tDISCONNECT: 14\r\n\t};\r\n\t\r\n\t// Collection of utility methods used to simplify module code \r\n\t// and promote the DRY pattern.  \r\n\r\n\t/**\r\n\t * Validate an object's parameter names to ensure they \r\n\t * match a list of expected variables name for this option\r\n\t * type. Used to ensure option object passed into the API don't\r\n\t * contain erroneous parameters.\r\n\t * @param {Object} obj - User options object\r\n\t * @param {Object} keys - valid keys and types that may exist in obj. \r\n\t * @throws {Error} Invalid option parameter found. \r\n\t * @private \r\n\t */\r\n\tvar validate = function(obj, keys) {\r\n\t\tfor (var key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {       \t\t\r\n\t\t\t\tif (keys.hasOwnProperty(key)) {\r\n\t\t\t\t\tif (typeof obj[key] !== keys[key])\r\n\t\t\t\t\t   throw new Error(format(ERROR.INVALID_TYPE, [typeof obj[key], key]));\r\n\t\t\t\t} else {\t\r\n\t\t\t\t\tvar errorStr = \"Unknown property, \" + key + \". Valid properties are:\";\r\n\t\t\t\t\tfor (var key in keys)\r\n\t\t\t\t\t\tif (keys.hasOwnProperty(key))\r\n\t\t\t\t\t\t\terrorStr = errorStr+\" \"+key;\r\n\t\t\t\t\tthrow new Error(errorStr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Return a new function which runs the user function bound\r\n\t * to a fixed scope. \r\n\t * @param {function} User function\r\n\t * @param {object} Function scope  \r\n\t * @return {function} User function bound to another scope\r\n\t * @private \r\n\t */\r\n\tvar scope = function (f, scope) {\r\n\t\treturn function () {\r\n\t\t\treturn f.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\t\r\n\t/** \r\n\t * Unique message type identifiers, with associated\r\n\t * associated integer values.\r\n\t * @private \r\n\t */\r\n\tvar ERROR = {\r\n\t\tOK: {code:0, text:\"AMQJSC0000I OK.\"},\r\n\t\tCONNECT_TIMEOUT: {code:1, text:\"AMQJSC0001E Connect timed out.\"},\r\n\t\tSUBSCRIBE_TIMEOUT: {code:2, text:\"AMQJS0002E Subscribe timed out.\"}, \r\n\t\tUNSUBSCRIBE_TIMEOUT: {code:3, text:\"AMQJS0003E Unsubscribe timed out.\"},\r\n\t\tPING_TIMEOUT: {code:4, text:\"AMQJS0004E Ping timed out.\"},\r\n\t\tINTERNAL_ERROR: {code:5, text:\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\"},\r\n\t\tCONNACK_RETURNCODE: {code:6, text:\"AMQJS0006E Bad Connack return code:{0} {1}.\"},\r\n\t\tSOCKET_ERROR: {code:7, text:\"AMQJS0007E Socket error:{0}.\"},\r\n\t\tSOCKET_CLOSE: {code:8, text:\"AMQJS0008I Socket closed.\"},\r\n\t\tMALFORMED_UTF: {code:9, text:\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\"},\r\n\t\tUNSUPPORTED: {code:10, text:\"AMQJS0010E {0} is not supported by this browser.\"},\r\n\t\tINVALID_STATE: {code:11, text:\"AMQJS0011E Invalid state {0}.\"},\r\n\t\tINVALID_TYPE: {code:12, text:\"AMQJS0012E Invalid type {0} for {1}.\"},\r\n\t\tINVALID_ARGUMENT: {code:13, text:\"AMQJS0013E Invalid argument {0} for {1}.\"},\r\n\t\tUNSUPPORTED_OPERATION: {code:14, text:\"AMQJS0014E Unsupported operation.\"},\r\n\t\tINVALID_STORED_DATA: {code:15, text:\"AMQJS0015E Invalid data in local storage key={0} value={1}.\"},\r\n\t\tINVALID_MQTT_MESSAGE_TYPE: {code:16, text:\"AMQJS0016E Invalid MQTT message type {0}.\"},\r\n\t\tMALFORMED_UNICODE: {code:17, text:\"AMQJS0017E Malformed Unicode string:{0} {1}.\"},\r\n\t};\r\n\t\r\n\t/** CONNACK RC Meaning. */\r\n\tvar CONNACK_RC = {\r\n\t\t0:\"Connection Accepted\",\r\n\t\t1:\"Connection Refused: unacceptable protocol version\",\r\n\t\t2:\"Connection Refused: identifier rejected\",\r\n\t\t3:\"Connection Refused: server unavailable\",\r\n\t\t4:\"Connection Refused: bad user name or password\",\r\n\t\t5:\"Connection Refused: not authorized\"\r\n\t};\r\n\r\n\t/**\r\n\t * Format an error message text.\r\n\t * @private\r\n\t * @param {error} ERROR.KEY value above.\r\n\t * @param {substitutions} [array] substituted into the text.\r\n\t * @return the text with the substitutions made.\r\n\t */\r\n\tvar format = function(error, substitutions) {\r\n\t\tvar text = error.text;\r\n\t\tif (substitutions) {\r\n\t\t  var field,start;\r\n\t\t  for (var i=0; i<substitutions.length; i++) {\r\n\t\t\tfield = \"{\"+i+\"}\";\r\n\t\t\tstart = text.indexOf(field);\r\n\t\t\tif(start > 0) {\r\n\t\t\t\tvar part1 = text.substring(0,start);\r\n\t\t\t\tvar part2 = text.substring(start+field.length);\r\n\t\t\t\ttext = part1+substitutions[i]+part2;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\t\treturn text;\r\n\t};\r\n\t\r\n\t//MQTT protocol and version          6    M    Q    I    s    d    p    3\r\n\tvar MqttProtoIdentifierv3 = [0x00,0x06,0x4d,0x51,0x49,0x73,0x64,0x70,0x03];\r\n\t//MQTT proto/version for 311         4    M    Q    T    T    4\r\n\tvar MqttProtoIdentifierv4 = [0x00,0x04,0x4d,0x51,0x54,0x54,0x04];\r\n\t\r\n\t/**\r\n\t * Construct an MQTT wire protocol message.\r\n\t * @param type MQTT packet type.\r\n\t * @param options optional wire message attributes.\r\n\t * \r\n\t * Optional properties\r\n\t * \r\n\t * messageIdentifier: message ID in the range [0..65535]\r\n\t * payloadMessage:\tApplication Message - PUBLISH only\r\n\t * connectStrings:\tarray of 0 or more Strings to be put into the CONNECT payload\r\n\t * topics:\t\t\tarray of strings (SUBSCRIBE, UNSUBSCRIBE)\r\n\t * requestQoS:\t\tarray of QoS values [0..2]\r\n\t *  \r\n\t * \"Flag\" properties \r\n\t * cleanSession:\ttrue if present / false if absent (CONNECT)\r\n\t * willMessage:  \ttrue if present / false if absent (CONNECT)\r\n\t * isRetained:\t\ttrue if present / false if absent (CONNECT)\r\n\t * userName:\t\ttrue if present / false if absent (CONNECT)\r\n\t * password:\t\ttrue if present / false if absent (CONNECT)\r\n\t * keepAliveInterval:\tinteger [0..65535]  (CONNECT)\r\n\t *\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\tvar WireMessage = function (type, options) { \t\r\n\t\tthis.type = type;\r\n\t\tfor (var name in options) {\r\n\t\t\tif (options.hasOwnProperty(name)) {\r\n\t\t\t\tthis[name] = options[name];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tWireMessage.prototype.encode = function() {\r\n\t\t// Compute the first byte of the fixed header\r\n\t\tvar first = ((this.type & 0x0f) << 4);\r\n\t\t\r\n\t\t/*\r\n\t\t * Now calculate the length of the variable header + payload by adding up the lengths\r\n\t\t * of all the component parts\r\n\t\t */\r\n\r\n\t\tvar remLength = 0;\r\n\t\tvar topicStrLength = new Array();\r\n\t\tvar destinationNameLength = 0;\r\n\t\t\r\n\t\t// if the message contains a messageIdentifier then we need two bytes for that\r\n\t\tif (this.messageIdentifier != undefined)\r\n\t\t\tremLength += 2;\r\n\r\n\t\tswitch(this.type) {\r\n\t\t\t// If this a Connect then we need to include 12 bytes for its header\r\n\t\t\tcase MESSAGE_TYPE.CONNECT:\r\n\t\t\t\tswitch(this.mqttVersion) {\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tremLength += MqttProtoIdentifierv3.length + 3;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tremLength += MqttProtoIdentifierv4.length + 3;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tremLength += UTF8Length(this.clientId) + 2;\r\n\t\t\t\tif (this.willMessage != undefined) {\r\n\t\t\t\t\tremLength += UTF8Length(this.willMessage.destinationName) + 2;\r\n\t\t\t\t\t// Will message is always a string, sent as UTF-8 characters with a preceding length.\r\n\t\t\t\t\tvar willMessagePayloadBytes = this.willMessage.payloadBytes;\r\n\t\t\t\t\tif (!(willMessagePayloadBytes instanceof Uint8Array))\r\n\t\t\t\t\t\twillMessagePayloadBytes = new Uint8Array(payloadBytes);\r\n\t\t\t\t\tremLength += willMessagePayloadBytes.byteLength +2;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.userName != undefined)\r\n\t\t\t\t\tremLength += UTF8Length(this.userName) + 2;\t\r\n\t\t\t\tif (this.password != undefined)\r\n\t\t\t\t\tremLength += UTF8Length(this.password) + 2;\r\n\t\t\tbreak;\r\n\r\n\t\t\t// Subscribe, Unsubscribe can both contain topic strings\r\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\t        \t\r\n\t\t\t\tfirst |= 0x02; // Qos = 1;\r\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\r\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\r\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\r\n\t\t\t\t}\r\n\t\t\t\tremLength += this.requestedQos.length; // 1 byte for each topic's Qos\r\n\t\t\t\t// QoS on Subscribe only\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\r\n\t\t\t\tfirst |= 0x02; // Qos = 1;\r\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\r\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\r\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBREL:\r\n\t\t\t\tfirst |= 0x02; // Qos = 1;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\r\n\t\t\t\tif (this.payloadMessage.duplicate) first |= 0x08;\r\n\t\t\t\tfirst  = first |= (this.payloadMessage.qos << 1);\r\n\t\t\t\tif (this.payloadMessage.retained) first |= 0x01;\r\n\t\t\t\tdestinationNameLength = UTF8Length(this.payloadMessage.destinationName);\r\n\t\t\t\tremLength += destinationNameLength + 2;\t   \r\n\t\t\t\tvar payloadBytes = this.payloadMessage.payloadBytes;\r\n\t\t\t\tremLength += payloadBytes.byteLength;  \r\n\t\t\t\tif (payloadBytes instanceof ArrayBuffer)\r\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes);\r\n\t\t\t\telse if (!(payloadBytes instanceof Uint8Array))\r\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes.buffer);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.DISCONNECT:\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t;\r\n\t\t}\r\n\r\n\t\t// Now we can allocate a buffer for the message\r\n\r\n\t\tvar mbi = encodeMBI(remLength);  // Convert the length to MQTT MBI format\r\n\t\tvar pos = mbi.length + 1;        // Offset of start of variable header\r\n\t\tvar buffer = new ArrayBuffer(remLength + pos);\r\n\t\tvar byteStream = new Uint8Array(buffer);    // view it as a sequence of bytes\r\n\r\n\t\t//Write the fixed header into the buffer\r\n\t\tbyteStream[0] = first;\r\n\t\tbyteStream.set(mbi,1);\r\n\r\n\t\t// If this is a PUBLISH then the variable header starts with a topic\r\n\t\tif (this.type == MESSAGE_TYPE.PUBLISH)\r\n\t\t\tpos = writeString(this.payloadMessage.destinationName, destinationNameLength, byteStream, pos);\r\n\t\t// If this is a CONNECT then the variable header contains the protocol name/version, flags and keepalive time\r\n\t\t\r\n\t\telse if (this.type == MESSAGE_TYPE.CONNECT) {\r\n\t\t\tswitch (this.mqttVersion) {\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv3, pos);\r\n\t\t\t\t\tpos += MqttProtoIdentifierv3.length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv4, pos);\r\n\t\t\t\t\tpos += MqttProtoIdentifierv4.length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar connectFlags = 0;\r\n\t\t\tif (this.cleanSession) \r\n\t\t\t\tconnectFlags = 0x02;\r\n\t\t\tif (this.willMessage != undefined ) {\r\n\t\t\t\tconnectFlags |= 0x04;\r\n\t\t\t\tconnectFlags |= (this.willMessage.qos<<3);\r\n\t\t\t\tif (this.willMessage.retained) {\r\n\t\t\t\t\tconnectFlags |= 0x20;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.userName != undefined)\r\n\t\t\t\tconnectFlags |= 0x80;\r\n\t\t\tif (this.password != undefined)\r\n\t\t\t\tconnectFlags |= 0x40;\r\n\t\t\tbyteStream[pos++] = connectFlags; \r\n\t\t\tpos = writeUint16 (this.keepAliveInterval, byteStream, pos);\r\n\t\t}\r\n\r\n\t\t// Output the messageIdentifier - if there is one\r\n\t\tif (this.messageIdentifier != undefined)\r\n\t\t\tpos = writeUint16 (this.messageIdentifier, byteStream, pos);\r\n\r\n\t\tswitch(this.type) {\r\n\t\t\tcase MESSAGE_TYPE.CONNECT:\r\n\t\t\t\tpos = writeString(this.clientId, UTF8Length(this.clientId), byteStream, pos); \r\n\t\t\t\tif (this.willMessage != undefined) {\r\n\t\t\t\t\tpos = writeString(this.willMessage.destinationName, UTF8Length(this.willMessage.destinationName), byteStream, pos);\r\n\t\t\t\t\tpos = writeUint16(willMessagePayloadBytes.byteLength, byteStream, pos);\r\n\t\t\t\t\tbyteStream.set(willMessagePayloadBytes, pos);\r\n\t\t\t\t\tpos += willMessagePayloadBytes.byteLength;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\tif (this.userName != undefined)\r\n\t\t\t\tpos = writeString(this.userName, UTF8Length(this.userName), byteStream, pos);\r\n\t\t\tif (this.password != undefined) \r\n\t\t\t\tpos = writeString(this.password, UTF8Length(this.password), byteStream, pos);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\t\r\n\t\t\t\t// PUBLISH has a text or binary payload, if text do not add a 2 byte length field, just the UTF characters.\t\r\n\t\t\t\tbyteStream.set(payloadBytes, pos);\r\n\t\t\t\t\t\r\n\t\t\t\tbreak;\r\n\r\n//    \t    case MESSAGE_TYPE.PUBREC:\t\r\n//    \t    case MESSAGE_TYPE.PUBREL:\t\r\n//    \t    case MESSAGE_TYPE.PUBCOMP:\t\r\n//    \t    \tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\r\n\t\t\t\t// SUBSCRIBE has a list of topic strings and request QoS\r\n\t\t\t\tfor (var i=0; i<this.topics.length; i++) {\r\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\r\n\t\t\t\t\tbyteStream[pos++] = this.requestedQos[i];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\t\r\n\t\t\t\t// UNSUBSCRIBE has a list of topic strings\r\n\t\t\t\tfor (var i=0; i<this.topics.length; i++)\r\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// Do nothing.\r\n\t\t}\r\n\r\n\t\treturn buffer;\r\n\t}\t\r\n\r\n\tfunction decodeMessage(input,pos) {\r\n\t    var startingPos = pos;\r\n\t\tvar first = input[pos];\r\n\t\tvar type = first >> 4;\r\n\t\tvar messageInfo = first &= 0x0f;\r\n\t\tpos += 1;\r\n\t\t\r\n\r\n\t\t// Decode the remaining length (MBI format)\r\n\r\n\t\tvar digit;\r\n\t\tvar remLength = 0;\r\n\t\tvar multiplier = 1;\r\n\t\tdo {\r\n\t\t\tif (pos == input.length) {\r\n\t\t\t    return [null,startingPos];\r\n\t\t\t}\r\n\t\t\tdigit = input[pos++];\r\n\t\t\tremLength += ((digit & 0x7F) * multiplier);\r\n\t\t\tmultiplier *= 128;\r\n\t\t} while ((digit & 0x80) != 0);\r\n\t\t\r\n\t\tvar endPos = pos+remLength;\r\n\t\tif (endPos > input.length) {\r\n\t\t    return [null,startingPos];\r\n\t\t}\r\n\r\n\t\tvar wireMessage = new WireMessage(type);\r\n\t\tswitch(type) {\r\n\t\t\tcase MESSAGE_TYPE.CONNACK:\r\n\t\t\t\tvar connectAcknowledgeFlags = input[pos++];\r\n\t\t\t\tif (connectAcknowledgeFlags & 0x01)\r\n\t\t\t\t\twireMessage.sessionPresent = true;\r\n\t\t\t\twireMessage.returnCode = input[pos++];\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:     \t    \t\r\n\t\t\t\tvar qos = (messageInfo >> 1) & 0x03;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar len = readUint16(input, pos);\r\n\t\t\t\tpos += 2;\r\n\t\t\t\tvar topicName = parseUTF8(input, pos, len);\r\n\t\t\t\tpos += len;\r\n\t\t\t\t// If QoS 1 or 2 there will be a messageIdentifier\r\n\t\t\t\tif (qos > 0) {\r\n\t\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\r\n\t\t\t\t\tpos += 2;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar message = new Paho.MQTT.Message(input.subarray(pos, endPos));\r\n\t\t\t\tif ((messageInfo & 0x01) == 0x01) \r\n\t\t\t\t\tmessage.retained = true;\r\n\t\t\t\tif ((messageInfo & 0x08) == 0x08)\r\n\t\t\t\t\tmessage.duplicate =  true;\r\n\t\t\t\tmessage.qos = qos;\r\n\t\t\t\tmessage.destinationName = topicName;\r\n\t\t\t\twireMessage.payloadMessage = message;\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase  MESSAGE_TYPE.PUBACK:\r\n\t\t\tcase  MESSAGE_TYPE.PUBREC:\t    \r\n\t\t\tcase  MESSAGE_TYPE.PUBREL:    \r\n\t\t\tcase  MESSAGE_TYPE.PUBCOMP:\r\n\t\t\tcase  MESSAGE_TYPE.UNSUBACK:    \t    \t\r\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase  MESSAGE_TYPE.SUBACK:\r\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\r\n\t\t\t\tpos += 2;\r\n\t\t\t\twireMessage.returnCode = input.subarray(pos, endPos);\t\r\n\t\t\t\tbreak;\r\n\t\t\r\n\t\t\tdefault:\r\n\t\t\t\t;\r\n\t\t}\r\n\t\t\t\t\r\n\t\treturn [wireMessage,endPos];\t\r\n\t}\r\n\r\n\tfunction writeUint16(input, buffer, offset) {\r\n\t\tbuffer[offset++] = input >> 8;      //MSB\r\n\t\tbuffer[offset++] = input % 256;     //LSB \r\n\t\treturn offset;\r\n\t}\t\r\n\r\n\tfunction writeString(input, utf8Length, buffer, offset) {\r\n\t\toffset = writeUint16(utf8Length, buffer, offset);\r\n\t\tstringToUTF8(input, buffer, offset);\r\n\t\treturn offset + utf8Length;\r\n\t}\t\r\n\r\n\tfunction readUint16(buffer, offset) {\r\n\t\treturn 256*buffer[offset] + buffer[offset+1];\r\n\t}\t\r\n\r\n\t/**\r\n\t * Encodes an MQTT Multi-Byte Integer\r\n\t * @private \r\n\t */\r\n\tfunction encodeMBI(number) {\r\n\t\tvar output = new Array(1);\r\n\t\tvar numBytes = 0;\r\n\r\n\t\tdo {\r\n\t\t\tvar digit = number % 128;\r\n\t\t\tnumber = number >> 7;\r\n\t\t\tif (number > 0) {\r\n\t\t\t\tdigit |= 0x80;\r\n\t\t\t}\r\n\t\t\toutput[numBytes++] = digit;\r\n\t\t} while ( (number > 0) && (numBytes<4) );\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t/**\r\n\t * Takes a String and calculates its length in bytes when encoded in UTF8.\r\n\t * @private\r\n\t */\r\n\tfunction UTF8Length(input) {\r\n\t\tvar output = 0;\r\n\t\tfor (var i = 0; i<input.length; i++) \r\n\t\t{\r\n\t\t\tvar charCode = input.charCodeAt(i);\r\n\t\t\t\tif (charCode > 0x7FF)\r\n\t\t\t\t   {\r\n\t\t\t\t\t  // Surrogate pair means its a 4 byte character\r\n\t\t\t\t\t  if (0xD800 <= charCode && charCode <= 0xDBFF)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t  i++;\r\n\t\t\t\t\t\t  output++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t   output +=3;\r\n\t\t\t\t   }\r\n\t\t\telse if (charCode > 0x7F)\r\n\t\t\t\toutput +=2;\r\n\t\t\telse\r\n\t\t\t\toutput++;\r\n\t\t} \r\n\t\treturn output;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Takes a String and writes it into an array as UTF8 encoded bytes.\r\n\t * @private\r\n\t */\r\n\tfunction stringToUTF8(input, output, start) {\r\n\t\tvar pos = start;\r\n\t\tfor (var i = 0; i<input.length; i++) {\r\n\t\t\tvar charCode = input.charCodeAt(i);\r\n\t\t\t\r\n\t\t\t// Check for a surrogate pair.\r\n\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF) {\r\n\t\t\t\tvar lowCharCode = input.charCodeAt(++i);\r\n\t\t\t\tif (isNaN(lowCharCode)) {\r\n\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UNICODE, [charCode, lowCharCode]));\r\n\t\t\t\t}\r\n\t\t\t\tcharCode = ((charCode - 0xD800)<<10) + (lowCharCode - 0xDC00) + 0x10000;\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (charCode <= 0x7F) {\r\n\t\t\t\toutput[pos++] = charCode;\r\n\t\t\t} else if (charCode <= 0x7FF) {\r\n\t\t\t\toutput[pos++] = charCode>>6  & 0x1F | 0xC0;\r\n\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\r\n\t\t\t} else if (charCode <= 0xFFFF) {    \t\t\t\t    \r\n\t\t\t\toutput[pos++] = charCode>>12 & 0x0F | 0xE0;\r\n\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;   \r\n\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;   \r\n\t\t\t} else {\r\n\t\t\t\toutput[pos++] = charCode>>18 & 0x07 | 0xF0;\r\n\t\t\t\toutput[pos++] = charCode>>12 & 0x3F | 0x80;\r\n\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;\r\n\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\r\n\t\t\t};\r\n\t\t} \r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tfunction parseUTF8(input, offset, length) {\r\n\t\tvar output = \"\";\r\n\t\tvar utf16;\r\n\t\tvar pos = offset;\r\n\r\n\t\twhile (pos < offset+length)\r\n\t\t{\r\n\t\t\tvar byte1 = input[pos++];\r\n\t\t\tif (byte1 < 128)\r\n\t\t\t\tutf16 = byte1;\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tvar byte2 = input[pos++]-128;\r\n\t\t\t\tif (byte2 < 0) \r\n\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16),\"\"]));\r\n\t\t\t\tif (byte1 < 0xE0)             // 2 byte character\r\n\t\t\t\t\tutf16 = 64*(byte1-0xC0) + byte2;\r\n\t\t\t\telse \r\n\t\t\t\t{ \r\n\t\t\t\t\tvar byte3 = input[pos++]-128;\r\n\t\t\t\t\tif (byte3 < 0) \r\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16)]));\r\n\t\t\t\t\tif (byte1 < 0xF0)        // 3 byte character\r\n\t\t\t\t\t\tutf16 = 4096*(byte1-0xE0) + 64*byte2 + byte3;\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t   var byte4 = input[pos++]-128;\r\n\t\t\t\t\t\t\t\t   if (byte4 < 0) \r\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\r\n\t\t\t\t\t\t\t\t   if (byte1 < 0xF8)        // 4 byte character \r\n\t\t\t\t\t\t\t\t\t\t   utf16 = 262144*(byte1-0xF0) + 4096*byte2 + 64*byte3 + byte4;\r\n\t\t\t\t\t   else                     // longer encodings are not supported  \r\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}  \r\n\r\n\t\t\t\tif (utf16 > 0xFFFF)   // 4 byte character - express as a surrogate pair\r\n\t\t\t\t  {\r\n\t\t\t\t\t utf16 -= 0x10000;\r\n\t\t\t\t\t output += String.fromCharCode(0xD800 + (utf16 >> 10)); // lead character\r\n\t\t\t\t\t utf16 = 0xDC00 + (utf16 & 0x3FF);  // trail character\r\n\t\t\t\t  }\r\n\t\t\toutput += String.fromCharCode(utf16);\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\t/** \r\n\t * Repeat keepalive requests, monitor responses.\r\n\t * @ignore\r\n\t */\r\n\tvar Pinger = function(client, window, keepAliveInterval) { \r\n\t\tthis._client = client;        \t\r\n\t\tthis._window = window;\r\n\t\tthis._keepAliveInterval = keepAliveInterval*1000;     \t\r\n\t\tthis.isReset = false;\r\n\t\t\r\n\t\tvar pingReq = new WireMessage(MESSAGE_TYPE.PINGREQ).encode(); \r\n\t\t\r\n\t\tvar doTimeout = function (pinger) {\r\n\t\t\treturn function () {\r\n\t\t\t\treturn doPing.apply(pinger);\r\n\t\t\t};\r\n\t\t};\r\n\t\t\r\n\t\t/** @ignore */\r\n\t\tvar doPing = function() { \r\n\t\t\tif (!this.isReset) {\r\n\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"Timed out\");\r\n\t\t\t\tthis._client._disconnected( ERROR.PING_TIMEOUT.code , format(ERROR.PING_TIMEOUT));\r\n\t\t\t} else {\r\n\t\t\t\tthis.isReset = false;\r\n\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"send PINGREQ\");\r\n\t\t\t\tthis._client.socket.send(pingReq); \r\n\t\t\t\tthis.timeout = this._window.setTimeout(doTimeout(this), this._keepAliveInterval);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.reset = function() {\r\n\t\t\tthis.isReset = true;\r\n\t\t\tthis._window.clearTimeout(this.timeout);\r\n\t\t\tif (this._keepAliveInterval > 0)\r\n\t\t\t\tthis.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\r\n\t\t}\r\n\r\n\t\tthis.cancel = function() {\r\n\t\t\tthis._window.clearTimeout(this.timeout);\r\n\t\t}\r\n\t }; \r\n\r\n\t/**\r\n\t * Monitor request completion.\r\n\t * @ignore\r\n\t */\r\n\tvar Timeout = function(client, window, timeoutSeconds, action, args) {\r\n\t\tthis._window = window;\r\n\t\tif (!timeoutSeconds)\r\n\t\t\ttimeoutSeconds = 30;\r\n\t\t\r\n\t\tvar doTimeout = function (action, client, args) {\r\n\t\t\treturn function () {\r\n\t\t\t\treturn action.apply(client, args);\r\n\t\t\t};\r\n\t\t};\r\n\t\tthis.timeout = setTimeout(doTimeout(action, client, args), timeoutSeconds * 1000);\r\n\t\t\r\n\t\tthis.cancel = function() {\r\n\t\t\tthis._window.clearTimeout(this.timeout);\r\n\t\t}\r\n\t}; \r\n\t\r\n\t/*\r\n\t * Internal implementation of the Websockets MQTT V3.1 client.\r\n\t * \r\n\t * @name Paho.MQTT.ClientImpl @constructor \r\n\t * @param {String} host the DNS nameof the webSocket host. \r\n\t * @param {Number} port the port number for that host.\r\n\t * @param {String} clientId the MQ client identifier.\r\n\t */\r\n\tvar ClientImpl = function (uri, host, port, path, clientId) {\r\n\t\t// Check dependencies are satisfied in this browser.\r\n\t\tif (!(\"WebSocket\" in global && global[\"WebSocket\"] !== null)) {\r\n\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"WebSocket\"]));\r\n\t\t}\r\n\t\tif (!(\"localStorage\" in global && global[\"localStorage\"] !== null)) {\r\n\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"localStorage\"]));\r\n\t\t}\r\n\t\tif (!(\"ArrayBuffer\" in global && global[\"ArrayBuffer\"] !== null)) {\r\n\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"ArrayBuffer\"]));\r\n\t\t}\r\n\t\tthis._trace(\"Paho.MQTT.Client\", uri, host, port, path, clientId);\r\n\r\n\t\tthis.host = host;\r\n\t\tthis.port = port;\r\n\t\tthis.path = path;\r\n\t\tthis.uri = uri;\r\n\t\tthis.clientId = clientId;\r\n\r\n\t\t// Local storagekeys are qualified with the following string.\r\n\t\t// The conditional inclusion of path in the key is for backward\r\n\t\t// compatibility to when the path was not configurable and assumed to\r\n\t\t// be /mqtt\r\n\t\tthis._localKey=host+\":\"+port+(path!=\"/mqtt\"?\":\"+path:\"\")+\":\"+clientId+\":\";\r\n\r\n\t\t// Create private instance-only message queue\r\n\t\t// Internal queue of messages to be sent, in sending order. \r\n\t\tthis._msg_queue = [];\r\n\r\n\t\t// Messages we have sent and are expecting a response for, indexed by their respective message ids. \r\n\t\tthis._sentMessages = {};\r\n\r\n\t\t// Messages we have received and acknowleged and are expecting a confirm message for\r\n\t\t// indexed by their respective message ids. \r\n\t\tthis._receivedMessages = {};\r\n\r\n\t\t// Internal list of callbacks to be executed when messages\r\n\t\t// have been successfully sent over web socket, e.g. disconnect\r\n\t\t// when it doesn't have to wait for ACK, just message is dispatched.\r\n\t\tthis._notify_msg_sent = {};\r\n\r\n\t\t// Unique identifier for SEND messages, incrementing\r\n\t\t// counter as messages are sent.\r\n\t\tthis._message_identifier = 1;\r\n\t\t\r\n\t\t// Used to determine the transmission sequence of stored sent messages.\r\n\t\tthis._sequence = 0;\r\n\t\t\r\n\r\n\t\t// Load the local state, if any, from the saved version, only restore state relevant to this client.   \t\r\n\t\tfor (var key in localStorage)\r\n\t\t\tif (   key.indexOf(\"Sent:\"+this._localKey) == 0  \t\t    \r\n\t\t\t\t|| key.indexOf(\"Received:\"+this._localKey) == 0)\r\n\t\t\tthis.restore(key);\r\n\t};\r\n\r\n\t// Messaging Client public instance members. \r\n\tClientImpl.prototype.host;\r\n\tClientImpl.prototype.port;\r\n\tClientImpl.prototype.path;\r\n\tClientImpl.prototype.uri;\r\n\tClientImpl.prototype.clientId;\r\n\r\n\t// Messaging Client private instance members.\r\n\tClientImpl.prototype.socket;\r\n\t/* true once we have received an acknowledgement to a CONNECT packet. */\r\n\tClientImpl.prototype.connected = false;\r\n\t/* The largest message identifier allowed, may not be larger than 2**16 but \r\n\t * if set smaller reduces the maximum number of outbound messages allowed.\r\n\t */ \r\n\tClientImpl.prototype.maxMessageIdentifier = 65536;\r\n\tClientImpl.prototype.connectOptions;\r\n\tClientImpl.prototype.hostIndex;\r\n\tClientImpl.prototype.onConnectionLost;\r\n\tClientImpl.prototype.onMessageDelivered;\r\n\tClientImpl.prototype.onMessageArrived;\r\n\tClientImpl.prototype.traceFunction;\r\n\tClientImpl.prototype._msg_queue = null;\r\n\tClientImpl.prototype._connectTimeout;\r\n\t/* The sendPinger monitors how long we allow before we send data to prove to the server that we are alive. */\r\n\tClientImpl.prototype.sendPinger = null;\r\n\t/* The receivePinger monitors how long we allow before we require evidence that the server is alive. */\r\n\tClientImpl.prototype.receivePinger = null;\r\n\t\r\n\tClientImpl.prototype.receiveBuffer = null;\r\n\t\r\n\tClientImpl.prototype._traceBuffer = null;\r\n\tClientImpl.prototype._MAX_TRACE_ENTRIES = 100;\r\n\r\n\tClientImpl.prototype.connect = function (connectOptions) {\r\n\t\tvar connectOptionsMasked = this._traceMask(connectOptions, \"password\"); \r\n\t\tthis._trace(\"Client.connect\", connectOptionsMasked, this.socket, this.connected);\r\n\t\t\r\n\t\tif (this.connected) \r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\r\n\t\tif (this.socket)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\r\n\t\t\r\n\t\tthis.connectOptions = connectOptions;\r\n\t\t\r\n\t\tif (connectOptions.uris) {\r\n\t\t\tthis.hostIndex = 0;\r\n\t\t\tthis._doConnect(connectOptions.uris[0]);  \r\n\t\t} else {\r\n\t\t\tthis._doConnect(this.uri);  \t\t\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\tClientImpl.prototype.subscribe = function (filter, subscribeOptions) {\r\n\t\tthis._trace(\"Client.subscribe\", filter, subscribeOptions);\r\n\t\t\t  \r\n\t\tif (!this.connected)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\r\n\t\t\r\n\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.SUBSCRIBE);\r\n\t\twireMessage.topics=[filter];\r\n\t\tif (subscribeOptions.qos != undefined)\r\n\t\t\twireMessage.requestedQos = [subscribeOptions.qos];\r\n\t\telse \r\n\t\t\twireMessage.requestedQos = [0];\r\n\t\t\r\n\t\tif (subscribeOptions.onSuccess) {\r\n\t\t\twireMessage.onSuccess = function(grantedQos) {subscribeOptions.onSuccess({invocationContext:subscribeOptions.invocationContext,grantedQos:grantedQos});};\r\n\t\t}\r\n\r\n\t\tif (subscribeOptions.onFailure) {\r\n\t\t\twireMessage.onFailure = function(errorCode) {subscribeOptions.onFailure({invocationContext:subscribeOptions.invocationContext,errorCode:errorCode});};\r\n\t\t}\r\n\r\n\t\tif (subscribeOptions.timeout) {\r\n\t\t\twireMessage.timeOut = new Timeout(this, window, subscribeOptions.timeout, subscribeOptions.onFailure\r\n\t\t\t\t\t, [{invocationContext:subscribeOptions.invocationContext, \r\n\t\t\t\t\t\terrorCode:ERROR.SUBSCRIBE_TIMEOUT.code, \r\n\t\t\t\t\t\terrorMessage:format(ERROR.SUBSCRIBE_TIMEOUT)}]);\r\n\t\t}\r\n\t\t\r\n\t\t// All subscriptions return a SUBACK. \r\n\t\tthis._requires_ack(wireMessage);\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype.unsubscribe = function(filter, unsubscribeOptions) {  \r\n\t\tthis._trace(\"Client.unsubscribe\", filter, unsubscribeOptions);\r\n\t\t\r\n\t\tif (!this.connected)\r\n\t\t   throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\r\n\t\t\r\n\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.UNSUBSCRIBE);\r\n\t\twireMessage.topics = [filter];\r\n\t\t\r\n\t\tif (unsubscribeOptions.onSuccess) {\r\n\t\t\twireMessage.callback = function() {unsubscribeOptions.onSuccess({invocationContext:unsubscribeOptions.invocationContext});};\r\n\t\t}\r\n\t\tif (unsubscribeOptions.timeout) {\r\n\t\t\twireMessage.timeOut = new Timeout(this, window, unsubscribeOptions.timeout, unsubscribeOptions.onFailure\r\n\t\t\t\t\t, [{invocationContext:unsubscribeOptions.invocationContext,\r\n\t\t\t\t\t\terrorCode:ERROR.UNSUBSCRIBE_TIMEOUT.code,\r\n\t\t\t\t\t\terrorMessage:format(ERROR.UNSUBSCRIBE_TIMEOUT)}]);\r\n\t\t}\r\n\t \r\n\t\t// All unsubscribes return a SUBACK.         \r\n\t\tthis._requires_ack(wireMessage);\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\t \r\n\tClientImpl.prototype.send = function (message) {\r\n\t\tthis._trace(\"Client.send\", message);\r\n\r\n\t\tif (!this.connected)\r\n\t\t   throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\r\n\t\t\r\n\t\twireMessage = new WireMessage(MESSAGE_TYPE.PUBLISH);\r\n\t\twireMessage.payloadMessage = message;\r\n\t\t\r\n\t\tif (message.qos > 0)\r\n\t\t\tthis._requires_ack(wireMessage);\r\n\t\telse if (this.onMessageDelivered)\r\n\t\t\tthis._notify_msg_sent[wireMessage] = this.onMessageDelivered(wireMessage.payloadMessage);\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\t\r\n\tClientImpl.prototype.disconnect = function () {\r\n\t\tthis._trace(\"Client.disconnect\");\r\n\r\n\t\tif (!this.socket)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connecting or connected\"]));\r\n\t\t\r\n\t\twireMessage = new WireMessage(MESSAGE_TYPE.DISCONNECT);\r\n\r\n\t\t// Run the disconnected call back as soon as the message has been sent,\r\n\t\t// in case of a failure later on in the disconnect processing.\r\n\t\t// as a consequence, the _disconected call back may be run several times.\r\n\t\tthis._notify_msg_sent[wireMessage] = scope(this._disconnected, this);\r\n\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\t\r\n\tClientImpl.prototype.getTraceLog = function () {\r\n\t\tif ( this._traceBuffer !== null ) {\r\n\t\t\tthis._trace(\"Client.getTraceLog\", new Date());\r\n\t\t\tthis._trace(\"Client.getTraceLog in flight messages\", this._sentMessages.length);\r\n\t\t\tfor (var key in this._sentMessages)\r\n\t\t\t\tthis._trace(\"_sentMessages \",key, this._sentMessages[key]);\r\n\t\t\tfor (var key in this._receivedMessages)\r\n\t\t\t\tthis._trace(\"_receivedMessages \",key, this._receivedMessages[key]);\r\n\t\t\t\r\n\t\t\treturn this._traceBuffer;\r\n\t\t}\r\n\t};\r\n\t\r\n\tClientImpl.prototype.startTrace = function () {\r\n\t\tif ( this._traceBuffer === null ) {\r\n\t\t\tthis._traceBuffer = [];\r\n\t\t}\r\n\t\tthis._trace(\"Client.startTrace\", new Date(), version);\r\n\t};\r\n\t\r\n\tClientImpl.prototype.stopTrace = function () {\r\n\t\tdelete this._traceBuffer;\r\n\t};\r\n\r\n\tClientImpl.prototype._doConnect = function (wsurl) { \t        \r\n\t\t// When the socket is open, this client will send the CONNECT WireMessage using the saved parameters. \r\n\t\tif (this.connectOptions.useSSL) {\r\n\t\t    var uriParts = wsurl.split(\":\");\r\n\t\t    uriParts[0] = \"wss\";\r\n\t\t    wsurl = uriParts.join(\":\");\r\n\t\t}\r\n\t\tthis.connected = false;\r\n\t\tif (this.connectOptions.mqttVersion < 4) {\r\n\t\t\tthis.socket = new WebSocket(wsurl, [\"mqttv3.1\"]);\r\n\t\t} else {\r\n\t\t\tthis.socket = new WebSocket(wsurl, [\"mqtt\"]);\r\n\t\t}\r\n\t\tthis.socket.binaryType = 'arraybuffer';\r\n\t\t\r\n\t\tthis.socket.onopen = scope(this._on_socket_open, this);\r\n\t\tthis.socket.onmessage = scope(this._on_socket_message, this);\r\n\t\tthis.socket.onerror = scope(this._on_socket_error, this);\r\n\t\tthis.socket.onclose = scope(this._on_socket_close, this);\r\n\t\t\r\n\t\tthis.sendPinger = new Pinger(this, window, this.connectOptions.keepAliveInterval);\r\n\t\tthis.receivePinger = new Pinger(this, window, this.connectOptions.keepAliveInterval);\r\n\t\t\r\n\t\tthis._connectTimeout = new Timeout(this, window, this.connectOptions.timeout, this._disconnected,  [ERROR.CONNECT_TIMEOUT.code, format(ERROR.CONNECT_TIMEOUT)]);\r\n\t};\r\n\r\n\t\r\n\t// Schedule a new message to be sent over the WebSockets\r\n\t// connection. CONNECT messages cause WebSocket connection\r\n\t// to be started. All other messages are queued internally\r\n\t// until this has happened. When WS connection starts, process\r\n\t// all outstanding messages. \r\n\tClientImpl.prototype._schedule_message = function (message) {\r\n\t\tthis._msg_queue.push(message);\r\n\t\t// Process outstanding messages in the queue if we have an  open socket, and have received CONNACK. \r\n\t\tif (this.connected) {\r\n\t\t\tthis._process_queue();\r\n\t\t}\r\n\t};\r\n\r\n\tClientImpl.prototype.store = function(prefix, wireMessage) {\r\n\t\tvar storedMessage = {type:wireMessage.type, messageIdentifier:wireMessage.messageIdentifier, version:1};\r\n\t\t\r\n\t\tswitch(wireMessage.type) {\r\n\t\t  case MESSAGE_TYPE.PUBLISH:\r\n\t\t\t  if(wireMessage.pubRecReceived)\r\n\t\t\t\t  storedMessage.pubRecReceived = true;\r\n\t\t\t  \r\n\t\t\t  // Convert the payload to a hex string.\r\n\t\t\t  storedMessage.payloadMessage = {};\r\n\t\t\t  var hex = \"\";\r\n\t\t\t  var messageBytes = wireMessage.payloadMessage.payloadBytes;\r\n\t\t\t  for (var i=0; i<messageBytes.length; i++) {\r\n\t\t\t\tif (messageBytes[i] <= 0xF)\r\n\t\t\t\t  hex = hex+\"0\"+messageBytes[i].toString(16);\r\n\t\t\t\telse \r\n\t\t\t\t  hex = hex+messageBytes[i].toString(16);\r\n\t\t\t  }\r\n\t\t\t  storedMessage.payloadMessage.payloadHex = hex;\r\n\t\t\t  \r\n\t\t\t  storedMessage.payloadMessage.qos = wireMessage.payloadMessage.qos;\r\n\t\t\t  storedMessage.payloadMessage.destinationName = wireMessage.payloadMessage.destinationName;\r\n\t\t\t  if (wireMessage.payloadMessage.duplicate) \r\n\t\t\t\t  storedMessage.payloadMessage.duplicate = true;\r\n\t\t\t  if (wireMessage.payloadMessage.retained) \r\n\t\t\t\t  storedMessage.payloadMessage.retained = true;\t   \r\n\t\t\t  \r\n\t\t\t  // Add a sequence number to sent messages.\r\n\t\t\t  if ( prefix.indexOf(\"Sent:\") == 0 ) {\r\n\t\t\t\t  if ( wireMessage.sequence === undefined )\r\n\t\t\t\t\t  wireMessage.sequence = ++this._sequence;\r\n\t\t\t\t  storedMessage.sequence = wireMessage.sequence;\r\n\t\t\t  }\r\n\t\t\t  break;    \r\n\t\t\t  \r\n\t\t\tdefault:\r\n\t\t\t\tthrow Error(format(ERROR.INVALID_STORED_DATA, [key, storedMessage]));\r\n\t\t}\r\n\t\tlocalStorage.setItem(prefix+this._localKey+wireMessage.messageIdentifier, JSON.stringify(storedMessage));\r\n\t};\r\n\t\r\n\tClientImpl.prototype.restore = function(key) {    \t\r\n\t\tvar value = localStorage.getItem(key);\r\n\t\tvar storedMessage = JSON.parse(value);\r\n\t\t\r\n\t\tvar wireMessage = new WireMessage(storedMessage.type, storedMessage);\r\n\t\t\r\n\t\tswitch(storedMessage.type) {\r\n\t\t  case MESSAGE_TYPE.PUBLISH:\r\n\t\t\t  // Replace the payload message with a Message object.\r\n\t\t\t  var hex = storedMessage.payloadMessage.payloadHex;\r\n\t\t\t  var buffer = new ArrayBuffer((hex.length)/2);\r\n\t\t\t  var byteStream = new Uint8Array(buffer); \r\n\t\t\t  var i = 0;\r\n\t\t\t  while (hex.length >= 2) { \r\n\t\t\t\t  var x = parseInt(hex.substring(0, 2), 16);\r\n\t\t\t\t  hex = hex.substring(2, hex.length);\r\n\t\t\t\t  byteStream[i++] = x;\r\n\t\t\t  }\r\n\t\t\t  var payloadMessage = new Paho.MQTT.Message(byteStream);\r\n\t\t\t  \r\n\t\t\t  payloadMessage.qos = storedMessage.payloadMessage.qos;\r\n\t\t\t  payloadMessage.destinationName = storedMessage.payloadMessage.destinationName;\r\n\t\t\t  if (storedMessage.payloadMessage.duplicate) \r\n\t\t\t\t  payloadMessage.duplicate = true;\r\n\t\t\t  if (storedMessage.payloadMessage.retained) \r\n\t\t\t\t  payloadMessage.retained = true;\t \r\n\t\t\t  wireMessage.payloadMessage = payloadMessage;\r\n\t\t\t  \r\n\t\t\t  break;    \r\n\t\t\t  \r\n\t\t\tdefault:\r\n\t\t\t  throw Error(format(ERROR.INVALID_STORED_DATA, [key, value]));\r\n\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\tif (key.indexOf(\"Sent:\"+this._localKey) == 0) {\r\n\t\t\twireMessage.payloadMessage.duplicate = true;\r\n\t\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;    \t\t    \r\n\t\t} else if (key.indexOf(\"Received:\"+this._localKey) == 0) {\r\n\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\r\n\t\t}\r\n\t};\r\n\t\r\n\tClientImpl.prototype._process_queue = function () {\r\n\t\tvar message = null;\r\n\t\t// Process messages in order they were added\r\n\t\tvar fifo = this._msg_queue.reverse();\r\n\r\n\t\t// Send all queued messages down socket connection\r\n\t\twhile ((message = fifo.pop())) {\r\n\t\t\tthis._socket_send(message);\r\n\t\t\t// Notify listeners that message was successfully sent\r\n\t\t\tif (this._notify_msg_sent[message]) {\r\n\t\t\t\tthis._notify_msg_sent[message]();\r\n\t\t\t\tdelete this._notify_msg_sent[message];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Expect an ACK response for this message. Add message to the set of in progress\r\n\t * messages and set an unused identifier in this message.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._requires_ack = function (wireMessage) {\r\n\t\tvar messageCount = Object.keys(this._sentMessages).length;\r\n\t\tif (messageCount > this.maxMessageIdentifier)\r\n\t\t\tthrow Error (\"Too many messages:\"+messageCount);\r\n\r\n\t\twhile(this._sentMessages[this._message_identifier] !== undefined) {\r\n\t\t\tthis._message_identifier++;\r\n\t\t}\r\n\t\twireMessage.messageIdentifier = this._message_identifier;\r\n\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;\r\n\t\tif (wireMessage.type === MESSAGE_TYPE.PUBLISH) {\r\n\t\t\tthis.store(\"Sent:\", wireMessage);\r\n\t\t}\r\n\t\tif (this._message_identifier === this.maxMessageIdentifier) {\r\n\t\t\tthis._message_identifier = 1;\r\n\t\t}\r\n\t};\r\n\r\n\t/** \r\n\t * Called when the underlying websocket has been opened.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._on_socket_open = function () {      \r\n\t\t// Create the CONNECT message object.\r\n\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.CONNECT, this.connectOptions); \r\n\t\twireMessage.clientId = this.clientId;\r\n\t\tthis._socket_send(wireMessage);\r\n\t};\r\n\r\n\t/** \r\n\t * Called when the underlying websocket has received a complete packet.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._on_socket_message = function (event) {\r\n\t\tthis._trace(\"Client._on_socket_message\", event.data);\r\n\t\t// Reset the receive ping timer, we now have evidence the server is alive.\r\n\t\tthis.receivePinger.reset();\r\n\t\tvar messages = this._deframeMessages(event.data);\r\n\t\tfor (var i = 0; i < messages.length; i+=1) {\r\n\t\t    this._handleMessage(messages[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\tClientImpl.prototype._deframeMessages = function(data) {\r\n\t\tvar byteArray = new Uint8Array(data);\r\n\t    if (this.receiveBuffer) {\r\n\t        var newData = new Uint8Array(this.receiveBuffer.length+byteArray.length);\r\n\t        newData.set(this.receiveBuffer);\r\n\t        newData.set(byteArray,this.receiveBuffer.length);\r\n\t        byteArray = newData;\r\n\t        delete this.receiveBuffer;\r\n\t    }\r\n\t\ttry {\r\n\t\t    var offset = 0;\r\n\t\t    var messages = [];\r\n\t\t    while(offset < byteArray.length) {\r\n\t\t        var result = decodeMessage(byteArray,offset);\r\n\t\t        var wireMessage = result[0];\r\n\t\t        offset = result[1];\r\n\t\t        if (wireMessage !== null) {\r\n\t\t            messages.push(wireMessage);\r\n\t\t        } else {\r\n\t\t            break;\r\n\t\t        }\r\n\t\t    }\r\n\t\t    if (offset < byteArray.length) {\r\n\t\t    \tthis.receiveBuffer = byteArray.subarray(offset);\r\n\t\t    }\r\n\t\t} catch (error) {\r\n\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,error.stack.toString()]));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn messages;\r\n\t}\r\n\t\r\n\tClientImpl.prototype._handleMessage = function(wireMessage) {\r\n\t\t\r\n\t\tthis._trace(\"Client._handleMessage\", wireMessage);\r\n\r\n\t\ttry {\r\n\t\t\tswitch(wireMessage.type) {\r\n\t\t\tcase MESSAGE_TYPE.CONNACK:\r\n\t\t\t\tthis._connectTimeout.cancel();\r\n\t\t\t\t\r\n\t\t\t\t// If we have started using clean session then clear up the local state.\r\n\t\t\t\tif (this.connectOptions.cleanSession) {\r\n\t\t\t\t\tfor (var key in this._sentMessages) {\t    \t\t\r\n\t\t\t\t\t\tvar sentMessage = this._sentMessages[key];\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+sentMessage.messageIdentifier);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._sentMessages = {};\r\n\r\n\t\t\t\t\tfor (var key in this._receivedMessages) {\r\n\t\t\t\t\t\tvar receivedMessage = this._receivedMessages[key];\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+receivedMessage.messageIdentifier);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._receivedMessages = {};\r\n\t\t\t\t}\r\n\t\t\t\t// Client connected and ready for business.\r\n\t\t\t\tif (wireMessage.returnCode === 0) {\r\n\t\t\t\t\tthis.connected = true;\r\n\t\t\t\t\t// Jump to the end of the list of uris and stop looking for a good host.\r\n\t\t\t\t\tif (this.connectOptions.uris)\r\n\t\t\t\t\t\tthis.hostIndex = this.connectOptions.uris.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._disconnected(ERROR.CONNACK_RETURNCODE.code , format(ERROR.CONNACK_RETURNCODE, [wireMessage.returnCode, CONNACK_RC[wireMessage.returnCode]]));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Resend messages.\r\n\t\t\t\tvar sequencedMessages = new Array();\r\n\t\t\t\tfor (var msgId in this._sentMessages) {\r\n\t\t\t\t\tif (this._sentMessages.hasOwnProperty(msgId))\r\n\t\t\t\t\t\tsequencedMessages.push(this._sentMessages[msgId]);\r\n\t\t\t\t}\r\n\t\t  \r\n\t\t\t\t// Sort sentMessages into the original sent order.\r\n\t\t\t\tvar sequencedMessages = sequencedMessages.sort(function(a,b) {return a.sequence - b.sequence;} );\r\n\t\t\t\tfor (var i=0, len=sequencedMessages.length; i<len; i++) {\r\n\t\t\t\t\tvar sentMessage = sequencedMessages[i];\r\n\t\t\t\t\tif (sentMessage.type == MESSAGE_TYPE.PUBLISH && sentMessage.pubRecReceived) {\r\n\t\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:sentMessage.messageIdentifier});\r\n\t\t\t\t\t\tthis._schedule_message(pubRelMessage);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._schedule_message(sentMessage);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Execute the connectOptions.onSuccess callback if there is one.\r\n\t\t\t\tif (this.connectOptions.onSuccess) {\r\n\t\t\t\t\tthis.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Process all queued messages now that the connection is established. \r\n\t\t\t\tthis._process_queue();\r\n\t\t\t\tbreak;\r\n\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\r\n\t\t\t\tthis._receivePublish(wireMessage);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBACK:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t // If this is a re flow of a PUBACK after we have restarted receivedMessage will not exist.\r\n\t\t\t\tif (sentMessage) {\r\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\r\n\t\t\t\t\tif (this.onMessageDelivered)\r\n\t\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBREC:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t// If this is a re flow of a PUBREC after we have restarted receivedMessage will not exist.\r\n\t\t\t\tif (sentMessage) {\r\n\t\t\t\t\tsentMessage.pubRecReceived = true;\r\n\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\t\tthis.store(\"Sent:\", sentMessage);\r\n\t\t\t\t\tthis._schedule_message(pubRelMessage);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBREL:\r\n\t\t\t\tvar receivedMessage = this._receivedMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+wireMessage.messageIdentifier);\r\n\t\t\t\t// If this is a re flow of a PUBREL after we have restarted receivedMessage will not exist.\r\n\t\t\t\tif (receivedMessage) {\r\n\t\t\t\t\tthis._receiveMessage(receivedMessage);\r\n\t\t\t\t\tdelete this._receivedMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t}\r\n\t\t\t\t// Always flow PubComp, we may have previously flowed PubComp but the server lost it and restarted.\r\n\t\t\t\tvar pubCompMessage = new WireMessage(MESSAGE_TYPE.PUBCOMP, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\tthis._schedule_message(pubCompMessage);                    \r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBCOMP: \r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\r\n\t\t\t\tif (this.onMessageDelivered)\r\n\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.SUBACK:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tif (sentMessage) {\r\n\t\t\t\t\tif(sentMessage.timeOut)\r\n\t\t\t\t\t\tsentMessage.timeOut.cancel();\r\n\t\t\t\t\t// This will need to be fixed when we add multiple topic support\r\n          \t\t\tif (wireMessage.returnCode[0] === 0x80) {\r\n\t\t\t\t\t\tif (sentMessage.onFailure) {\r\n\t\t\t\t\t\t\tsentMessage.onFailure(wireMessage.returnCode);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t} else if (sentMessage.onSuccess) {\r\n\t\t\t\t\t\tsentMessage.onSuccess(wireMessage.returnCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.UNSUBACK:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tif (sentMessage) { \r\n\t\t\t\t\tif (sentMessage.timeOut)\r\n\t\t\t\t\t\tsentMessage.timeOut.cancel();\r\n\t\t\t\t\tif (sentMessage.callback) {\r\n\t\t\t\t\t\tsentMessage.callback();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PINGRESP:\r\n\t\t\t\t/* The sendPinger or receivePinger may have sent a ping, the receivePinger has already been reset. */\r\n\t\t\t\tthis.sendPinger.reset();\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.DISCONNECT:\r\n\t\t\t\t// Clients do not expect to receive disconnect packets.\r\n\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\r\n\t\t\t};\r\n\t\t} catch (error) {\r\n\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,error.stack.toString()]));\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\t\r\n\t/** @ignore */\r\n\tClientImpl.prototype._on_socket_error = function (error) {\r\n\t\tthis._disconnected(ERROR.SOCKET_ERROR.code , format(ERROR.SOCKET_ERROR, [error.data]));\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._on_socket_close = function () {\r\n\t\tthis._disconnected(ERROR.SOCKET_CLOSE.code , format(ERROR.SOCKET_CLOSE));\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._socket_send = function (wireMessage) {\r\n\t\t\r\n\t\tif (wireMessage.type == 1) {\r\n\t\t\tvar wireMessageMasked = this._traceMask(wireMessage, \"password\"); \r\n\t\t\tthis._trace(\"Client._socket_send\", wireMessageMasked);\r\n\t\t}\r\n\t\telse this._trace(\"Client._socket_send\", wireMessage);\r\n\t\t\r\n\t\tthis.socket.send(wireMessage.encode());\r\n\t\t/* We have proved to the server we are alive. */\r\n\t\tthis.sendPinger.reset();\r\n\t};\r\n\t\r\n\t/** @ignore */\r\n\tClientImpl.prototype._receivePublish = function (wireMessage) {\r\n\t\tswitch(wireMessage.payloadMessage.qos) {\r\n\t\t\tcase \"undefined\":\r\n\t\t\tcase 0:\r\n\t\t\t\tthis._receiveMessage(wireMessage);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\tvar pubAckMessage = new WireMessage(MESSAGE_TYPE.PUBACK, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\tthis._schedule_message(pubAckMessage);\r\n\t\t\t\tthis._receiveMessage(wireMessage);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\r\n\t\t\t\tthis.store(\"Received:\", wireMessage);\r\n\t\t\t\tvar pubRecMessage = new WireMessage(MESSAGE_TYPE.PUBREC, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\tthis._schedule_message(pubRecMessage);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow Error(\"Invaild qos=\"+wireMmessage.payloadMessage.qos);\r\n\t\t};\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._receiveMessage = function (wireMessage) {\r\n\t\tif (this.onMessageArrived) {\r\n\t\t\tthis.onMessageArrived(wireMessage.payloadMessage);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Client has disconnected either at its own request or because the server\r\n\t * or network disconnected it. Remove all non-durable state.\r\n\t * @param {errorCode} [number] the error number.\r\n\t * @param {errorText} [string] the error text.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._disconnected = function (errorCode, errorText) {\r\n\t\tthis._trace(\"Client._disconnected\", errorCode, errorText);\r\n\t\t\r\n\t\tthis.sendPinger.cancel();\r\n\t\tthis.receivePinger.cancel();\r\n\t\tif (this._connectTimeout)\r\n\t\t\tthis._connectTimeout.cancel();\r\n\t\t// Clear message buffers.\r\n\t\tthis._msg_queue = [];\r\n\t\tthis._notify_msg_sent = {};\r\n\t   \r\n\t\tif (this.socket) {\r\n\t\t\t// Cancel all socket callbacks so that they cannot be driven again by this socket.\r\n\t\t\tthis.socket.onopen = null;\r\n\t\t\tthis.socket.onmessage = null;\r\n\t\t\tthis.socket.onerror = null;\r\n\t\t\tthis.socket.onclose = null;\r\n\t\t\tif (this.socket.readyState === 1)\r\n\t\t\t\tthis.socket.close();\r\n\t\t\tdelete this.socket;           \r\n\t\t}\r\n\t\t\r\n\t\tif (this.connectOptions.uris && this.hostIndex < this.connectOptions.uris.length-1) {\r\n\t\t\t// Try the next host.\r\n\t\t\tthis.hostIndex++;\r\n\t\t\tthis._doConnect(this.connectOptions.uris[this.hostIndex]);\r\n\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\tif (errorCode === undefined) {\r\n\t\t\t\terrorCode = ERROR.OK.code;\r\n\t\t\t\terrorText = format(ERROR.OK);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Run any application callbacks last as they may attempt to reconnect and hence create a new socket.\r\n\t\t\tif (this.connected) {\r\n\t\t\t\tthis.connected = false;\r\n\t\t\t\t// Execute the connectionLostCallback if there is one, and we were connected.       \r\n\t\t\t\tif (this.onConnectionLost)\r\n\t\t\t\t\tthis.onConnectionLost({errorCode:errorCode, errorMessage:errorText});      \t\r\n\t\t\t} else {\r\n\t\t\t\t// Otherwise we never had a connection, so indicate that the connect has failed.\r\n\t\t\t\tif (this.connectOptions.mqttVersion === 4 && this.connectOptions.mqttVersionExplicit === false) {\r\n\t\t\t\t\tthis._trace(\"Failed to connect V4, dropping back to V3\")\r\n\t\t\t\t\tthis.connectOptions.mqttVersion = 3;\r\n\t\t\t\t\tif (this.connectOptions.uris) {\r\n\t\t\t\t\t\tthis.hostIndex = 0;\r\n\t\t\t\t\t\tthis._doConnect(this.connectOptions.uris[0]);  \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._doConnect(this.uri);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t} else if(this.connectOptions.onFailure) {\r\n\t\t\t\t\tthis.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext, errorCode:errorCode, errorMessage:errorText});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._trace = function () {\r\n\t\t// Pass trace message back to client's callback function\r\n\t\tif (this.traceFunction) {\r\n\t\t\tfor (var i in arguments)\r\n\t\t\t{\t\r\n\t\t\t\tif (typeof arguments[i] !== \"undefined\")\r\n\t\t\t\t\targuments[i] = JSON.stringify(arguments[i]);\r\n\t\t\t}\r\n\t\t\tvar record = Array.prototype.slice.call(arguments).join(\"\");\r\n\t\t\tthis.traceFunction ({severity: \"Debug\", message: record\t});\r\n\t\t}\r\n\r\n\t\t//buffer style trace\r\n\t\tif ( this._traceBuffer !== null ) {  \r\n\t\t\tfor (var i = 0, max = arguments.length; i < max; i++) {\r\n\t\t\t\tif ( this._traceBuffer.length == this._MAX_TRACE_ENTRIES ) {    \r\n\t\t\t\t\tthis._traceBuffer.shift();              \r\n\t\t\t\t}\r\n\t\t\t\tif (i === 0) this._traceBuffer.push(arguments[i]);\r\n\t\t\t\telse if (typeof arguments[i] === \"undefined\" ) this._traceBuffer.push(arguments[i]);\r\n\t\t\t\telse this._traceBuffer.push(\"  \"+JSON.stringify(arguments[i]));\r\n\t\t   };\r\n\t\t};\r\n\t};\r\n\t\r\n\t/** @ignore */\r\n\tClientImpl.prototype._traceMask = function (traceObject, masked) {\r\n\t\tvar traceObjectMasked = {};\r\n\t\tfor (var attr in traceObject) {\r\n\t\t\tif (traceObject.hasOwnProperty(attr)) {\r\n\t\t\t\tif (attr == masked) \r\n\t\t\t\t\ttraceObjectMasked[attr] = \"******\";\r\n\t\t\t\telse\r\n\t\t\t\t\ttraceObjectMasked[attr] = traceObject[attr];\r\n\t\t\t} \r\n\t\t}\r\n\t\treturn traceObjectMasked;\r\n\t};\r\n\r\n\t// ------------------------------------------------------------------------\r\n\t// Public Programming interface.\r\n\t// ------------------------------------------------------------------------\r\n\t\r\n\t/** \r\n\t * The JavaScript application communicates to the server using a {@link Paho.MQTT.Client} object. \r\n\t * <p>\r\n\t * Most applications will create just one Client object and then call its connect() method,\r\n\t * however applications can create more than one Client object if they wish. \r\n\t * In this case the combination of host, port and clientId attributes must be different for each Client object.\r\n\t * <p>\r\n\t * The send, subscribe and unsubscribe methods are implemented as asynchronous JavaScript methods \r\n\t * (even though the underlying protocol exchange might be synchronous in nature). \r\n\t * This means they signal their completion by calling back to the application, \r\n\t * via Success or Failure callback functions provided by the application on the method in question. \r\n\t * Such callbacks are called at most once per method invocation and do not persist beyond the lifetime \r\n\t * of the script that made the invocation.\r\n\t * <p>\r\n\t * In contrast there are some callback functions, most notably <i>onMessageArrived</i>, \r\n\t * that are defined on the {@link Paho.MQTT.Client} object.  \r\n\t * These may get called multiple times, and aren't directly related to specific method invocations made by the client. \r\n\t *\r\n\t * @name Paho.MQTT.Client    \r\n\t * \r\n\t * @constructor\r\n\t *  \r\n\t * @param {string} host - the address of the messaging server, as a fully qualified WebSocket URI, as a DNS name or dotted decimal IP address.\r\n\t * @param {number} port - the port number to connect to - only required if host is not a URI\r\n\t * @param {string} path - the path on the host to connect to - only used if host is not a URI. Default: '/mqtt'.\r\n\t * @param {string} clientId - the Messaging client identifier, between 1 and 23 characters in length.\r\n\t * \r\n\t * @property {string} host - <i>read only</i> the server's DNS hostname or dotted decimal IP address.\r\n\t * @property {number} port - <i>read only</i> the server's port.\r\n\t * @property {string} path - <i>read only</i> the server's path.\r\n\t * @property {string} clientId - <i>read only</i> used when connecting to the server.\r\n\t * @property {function} onConnectionLost - called when a connection has been lost. \r\n\t *                            after a connect() method has succeeded.\r\n\t *                            Establish the call back used when a connection has been lost. The connection may be\r\n\t *                            lost because the client initiates a disconnect or because the server or network \r\n\t *                            cause the client to be disconnected. The disconnect call back may be called without \r\n\t *                            the connectionComplete call back being invoked if, for example the client fails to \r\n\t *                            connect.\r\n\t *                            A single response object parameter is passed to the onConnectionLost callback containing the following fields:\r\n\t *                            <ol>   \r\n\t *                            <li>errorCode\r\n\t *                            <li>errorMessage       \r\n\t *                            </ol>\r\n\t * @property {function} onMessageDelivered called when a message has been delivered. \r\n\t *                            All processing that this Client will ever do has been completed. So, for example,\r\n\t *                            in the case of a Qos=2 message sent by this client, the PubComp flow has been received from the server\r\n\t *                            and the message has been removed from persistent storage before this callback is invoked. \r\n\t *                            Parameters passed to the onMessageDelivered callback are:\r\n\t *                            <ol>   \r\n\t *                            <li>{@link Paho.MQTT.Message} that was delivered.\r\n\t *                            </ol>    \r\n\t * @property {function} onMessageArrived called when a message has arrived in this Paho.MQTT.client. \r\n\t *                            Parameters passed to the onMessageArrived callback are:\r\n\t *                            <ol>   \r\n\t *                            <li>{@link Paho.MQTT.Message} that has arrived.\r\n\t *                            </ol>    \r\n\t */\r\n\tvar Client = function (host, port, path, clientId) {\r\n\t    \r\n\t    var uri;\r\n\t    \r\n\t\tif (typeof host !== \"string\")\r\n\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof host, \"host\"]));\r\n\t    \r\n\t    if (arguments.length == 2) {\r\n\t        // host: must be full ws:// uri\r\n\t        // port: clientId\r\n\t        clientId = port;\r\n\t        uri = host;\r\n\t        var match = uri.match(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/);\r\n\t        if (match) {\r\n\t            host = match[4]||match[2];\r\n\t            port = parseInt(match[7]);\r\n\t            path = match[8];\r\n\t        } else {\r\n\t            throw new Error(format(ERROR.INVALID_ARGUMENT,[host,\"host\"]));\r\n\t        }\r\n\t    } else {\r\n\t        if (arguments.length == 3) {\r\n\t\t\t\tclientId = path;\r\n\t\t\t\tpath = \"/mqtt\";\r\n\t\t\t}\r\n\t\t\tif (typeof port !== \"number\" || port < 0)\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof port, \"port\"]));\r\n\t\t\tif (typeof path !== \"string\")\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof path, \"path\"]));\r\n\t\t\t\r\n\t\t\tvar ipv6AddSBracket = (host.indexOf(\":\") != -1 && host.slice(0,1) != \"[\" && host.slice(-1) != \"]\");\r\n\t\t\turi = \"ws://\"+(ipv6AddSBracket?\"[\"+host+\"]\":host)+\":\"+port+path;\r\n\t\t}\r\n\r\n\t\tvar clientIdLength = 0;\r\n\t\tfor (var i = 0; i<clientId.length; i++) {\r\n\t\t\tvar charCode = clientId.charCodeAt(i);                   \r\n\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF)  {    \t\t\t\r\n\t\t\t\t i++; // Surrogate pair.\r\n\t\t\t}   \t\t   \r\n\t\t\tclientIdLength++;\r\n\t\t}     \t   \t\r\n\t\tif (typeof clientId !== \"string\" || clientIdLength > 65535)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [clientId, \"clientId\"])); \r\n\t\t\r\n\t\tvar client = new ClientImpl(uri, host, port, path, clientId);\r\n\t\tthis._getHost =  function() { return host; };\r\n\t\tthis._setHost = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\t\t\t\r\n\t\tthis._getPort = function() { return port; };\r\n\t\tthis._setPort = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\r\n\t\tthis._getPath = function() { return path; };\r\n\t\tthis._setPath = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\r\n\t\tthis._getURI = function() { return uri; };\r\n\t\tthis._setURI = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\t\t\r\n\t\tthis._getClientId = function() { return client.clientId; };\r\n\t\tthis._setClientId = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\t\t\r\n\t\tthis._getOnConnectionLost = function() { return client.onConnectionLost; };\r\n\t\tthis._setOnConnectionLost = function(newOnConnectionLost) { \r\n\t\t\tif (typeof newOnConnectionLost === \"function\")\r\n\t\t\t\tclient.onConnectionLost = newOnConnectionLost;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnectionLost, \"onConnectionLost\"]));\r\n\t\t};\r\n\r\n\t\tthis._getOnMessageDelivered = function() { return client.onMessageDelivered; };\r\n\t\tthis._setOnMessageDelivered = function(newOnMessageDelivered) { \r\n\t\t\tif (typeof newOnMessageDelivered === \"function\")\r\n\t\t\t\tclient.onMessageDelivered = newOnMessageDelivered;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageDelivered, \"onMessageDelivered\"]));\r\n\t\t};\r\n\t   \r\n\t\tthis._getOnMessageArrived = function() { return client.onMessageArrived; };\r\n\t\tthis._setOnMessageArrived = function(newOnMessageArrived) { \r\n\t\t\tif (typeof newOnMessageArrived === \"function\")\r\n\t\t\t\tclient.onMessageArrived = newOnMessageArrived;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageArrived, \"onMessageArrived\"]));\r\n\t\t};\r\n\r\n\t\tthis._getTrace = function() { return client.traceFunction; };\r\n\t\tthis._setTrace = function(trace) {\r\n\t\t\tif(typeof trace === \"function\"){\r\n\t\t\t\tclient.traceFunction = trace;\r\n\t\t\t}else{\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof trace, \"onTrace\"]));\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Connect this Messaging client to its server. \r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#connect\r\n\t\t * @function\r\n\t\t * @param {Object} connectOptions - attributes used with the connection. \r\n\t\t * @param {number} connectOptions.timeout - If the connect has not succeeded within this \r\n\t\t *                    number of seconds, it is deemed to have failed.\r\n\t\t *                    The default is 30 seconds.\r\n\t\t * @param {string} connectOptions.userName - Authentication username for this connection.\r\n\t\t * @param {string} connectOptions.password - Authentication password for this connection.\r\n\t\t * @param {Paho.MQTT.Message} connectOptions.willMessage - sent by the server when the client\r\n\t\t *                    disconnects abnormally.\r\n\t\t * @param {Number} connectOptions.keepAliveInterval - the server disconnects this client if\r\n\t\t *                    there is no activity for this number of seconds.\r\n\t\t *                    The default value of 60 seconds is assumed if not set.\r\n\t\t * @param {boolean} connectOptions.cleanSession - if true(default) the client and server \r\n\t\t *                    persistent state is deleted on successful connect.\r\n\t\t * @param {boolean} connectOptions.useSSL - if present and true, use an SSL Websocket connection.\r\n\t\t * @param {object} connectOptions.invocationContext - passed to the onSuccess callback or onFailure callback.\r\n\t\t * @param {function} connectOptions.onSuccess - called when the connect acknowledgement \r\n\t\t *                    has been received from the server.\r\n\t\t * A single response object parameter is passed to the onSuccess callback containing the following fields:\r\n\t\t * <ol>\r\n\t\t * <li>invocationContext as passed in to the onSuccess method in the connectOptions.       \r\n\t\t * </ol>\r\n\t\t * @config {function} [onFailure] called when the connect request has failed or timed out.\r\n\t\t * A single response object parameter is passed to the onFailure callback containing the following fields:\r\n\t\t * <ol>\r\n\t\t * <li>invocationContext as passed in to the onFailure method in the connectOptions.       \r\n\t\t * <li>errorCode a number indicating the nature of the error.\r\n\t\t * <li>errorMessage text describing the error.      \r\n\t\t * </ol>\r\n\t\t * @config {Array} [hosts] If present this contains either a set of hostnames or fully qualified\r\n\t\t * WebSocket URIs (ws://example.com:1883/mqtt), that are tried in order in place \r\n\t\t * of the host and port paramater on the construtor. The hosts are tried one at at time in order until\r\n\t\t * one of then succeeds.\r\n\t\t * @config {Array} [ports] If present the set of ports matching the hosts. If hosts contains URIs, this property\r\n\t\t * is not used.\r\n\t\t * @throws {InvalidState} if the client is not in disconnected state. The client must have received connectionLost\r\n\t\t * or disconnected before calling connect for a second or subsequent time.\r\n\t\t */\r\n\t\tthis.connect = function (connectOptions) {\r\n\t\t\tconnectOptions = connectOptions || {} ;\r\n\t\t\tvalidate(connectOptions,  {timeout:\"number\",\r\n\t\t\t\t\t\t\t\t\t   userName:\"string\", \r\n\t\t\t\t\t\t\t\t\t   password:\"string\", \r\n\t\t\t\t\t\t\t\t\t   willMessage:\"object\", \r\n\t\t\t\t\t\t\t\t\t   keepAliveInterval:\"number\", \r\n\t\t\t\t\t\t\t\t\t   cleanSession:\"boolean\", \r\n\t\t\t\t\t\t\t\t\t   useSSL:\"boolean\",\r\n\t\t\t\t\t\t\t\t\t   invocationContext:\"object\", \r\n\t\t\t\t\t\t\t\t\t   onSuccess:\"function\", \r\n\t\t\t\t\t\t\t\t\t   onFailure:\"function\",\r\n\t\t\t\t\t\t\t\t\t   hosts:\"object\",\r\n\t\t\t\t\t\t\t\t\t   ports:\"object\",\r\n\t\t\t\t\t\t\t\t\t   mqttVersion:\"number\"});\r\n\t\t\t\r\n\t\t\t// If no keep alive interval is set, assume 60 seconds.\r\n\t\t\tif (connectOptions.keepAliveInterval === undefined)\r\n\t\t\t\tconnectOptions.keepAliveInterval = 60;\r\n\r\n\t\t\tif (connectOptions.mqttVersion > 4 || connectOptions.mqttVersion < 3) {\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.mqttVersion, \"connectOptions.mqttVersion\"]));\r\n\t\t\t}\r\n\r\n\t\t\tif (connectOptions.mqttVersion === undefined) {\r\n\t\t\t\tconnectOptions.mqttVersionExplicit = false;\r\n\t\t\t\tconnectOptions.mqttVersion = 4;\r\n\t\t\t} else {\r\n\t\t\t\tconnectOptions.mqttVersionExplicit = true;\r\n\t\t\t}\r\n\r\n\t\t\t//Check that if password is set, so is username\r\n\t\t\tif (connectOptions.password === undefined && connectOptions.userName !== undefined)\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.password, \"connectOptions.password\"]))\r\n\r\n\t\t\tif (connectOptions.willMessage) {\r\n\t\t\t\tif (!(connectOptions.willMessage instanceof Message))\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [connectOptions.willMessage, \"connectOptions.willMessage\"]));\r\n\t\t\t\t// The will message must have a payload that can be represented as a string.\r\n\t\t\t\t// Cause the willMessage to throw an exception if this is not the case.\r\n\t\t\t\tconnectOptions.willMessage.stringPayload;\r\n\t\t\t\t\r\n\t\t\t\tif (typeof connectOptions.willMessage.destinationName === \"undefined\")\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.willMessage.destinationName, \"connectOptions.willMessage.destinationName\"]));\r\n\t\t\t}\r\n\t\t\tif (typeof connectOptions.cleanSession === \"undefined\")\r\n\t\t\t\tconnectOptions.cleanSession = true;\r\n\t\t\tif (connectOptions.hosts) {\r\n\t\t\t    \r\n\t\t\t\tif (!(connectOptions.hosts instanceof Array) )\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\r\n\t\t\t\tif (connectOptions.hosts.length <1 )\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\r\n\t\t\t\t\r\n\t\t\t\tvar usingURIs = false;\r\n\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\r\n\t\t\t\t\tif (typeof connectOptions.hosts[i] !== \"string\")\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\r\n\t\t\t\t\tif (/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/.test(connectOptions.hosts[i])) {\r\n\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\tusingURIs = true;\r\n\t\t\t\t\t\t} else if (!usingURIs) {\r\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (usingURIs) {\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!usingURIs) {\r\n\t\t\t\t\tif (!connectOptions.ports)\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\r\n\t\t\t\t\tif (!(connectOptions.ports instanceof Array) )\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\r\n\t\t\t\t\tif (connectOptions.hosts.length != connectOptions.ports.length)\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\r\n\t\t\t\t\t\r\n\t\t\t\t\tconnectOptions.uris = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\r\n\t\t\t\t\t\tif (typeof connectOptions.ports[i] !== \"number\" || connectOptions.ports[i] < 0)\r\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.ports[i], \"connectOptions.ports[\"+i+\"]\"]));\r\n\t\t\t\t\t\tvar host = connectOptions.hosts[i];\r\n\t\t\t\t\t\tvar port = connectOptions.ports[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar ipv6 = (host.indexOf(\":\") != -1);\r\n\t\t\t\t\t\turi = \"ws://\"+(ipv6?\"[\"+host+\"]\":host)+\":\"+port+path;\r\n\t\t\t\t\t\tconnectOptions.uris.push(uri);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconnectOptions.uris = connectOptions.hosts;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tclient.connect(connectOptions);\r\n\t\t};\r\n\t \r\n\t\t/** \r\n\t\t * Subscribe for messages, request receipt of a copy of messages sent to the destinations described by the filter.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#subscribe\r\n\t\t * @function\r\n\t\t * @param {string} filter describing the destinations to receive messages from.\r\n\t\t * <br>\r\n\t\t * @param {object} subscribeOptions - used to control the subscription\r\n\t\t *\r\n\t\t * @param {number} subscribeOptions.qos - the maiximum qos of any publications sent \r\n\t\t *                                  as a result of making this subscription.\r\n\t\t * @param {object} subscribeOptions.invocationContext - passed to the onSuccess callback \r\n\t\t *                                  or onFailure callback.\r\n\t\t * @param {function} subscribeOptions.onSuccess - called when the subscribe acknowledgement\r\n\t\t *                                  has been received from the server.\r\n\t\t *                                  A single response object parameter is passed to the onSuccess callback containing the following fields:\r\n\t\t *                                  <ol>\r\n\t\t *                                  <li>invocationContext if set in the subscribeOptions.       \r\n\t\t *                                  </ol>\r\n\t\t * @param {function} subscribeOptions.onFailure - called when the subscribe request has failed or timed out.\r\n\t\t *                                  A single response object parameter is passed to the onFailure callback containing the following fields:\r\n\t\t *                                  <ol>\r\n\t\t *                                  <li>invocationContext - if set in the subscribeOptions.       \r\n\t\t *                                  <li>errorCode - a number indicating the nature of the error.\r\n\t\t *                                  <li>errorMessage - text describing the error.      \r\n\t\t *                                  </ol>\r\n\t\t * @param {number} subscribeOptions.timeout - which, if present, determines the number of\r\n\t\t *                                  seconds after which the onFailure calback is called.\r\n\t\t *                                  The presence of a timeout does not prevent the onSuccess\r\n\t\t *                                  callback from being called when the subscribe completes.         \r\n\t\t * @throws {InvalidState} if the client is not in connected state.\r\n\t\t */\r\n\t\tthis.subscribe = function (filter, subscribeOptions) {\r\n\t\t\tif (typeof filter !== \"string\")\r\n\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\r\n\t\t\tsubscribeOptions = subscribeOptions || {} ;\r\n\t\t\tvalidate(subscribeOptions,  {qos:\"number\", \r\n\t\t\t\t\t\t\t\t\t\t invocationContext:\"object\", \r\n\t\t\t\t\t\t\t\t\t\t onSuccess:\"function\", \r\n\t\t\t\t\t\t\t\t\t\t onFailure:\"function\",\r\n\t\t\t\t\t\t\t\t\t\t timeout:\"number\"\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\tif (subscribeOptions.timeout && !subscribeOptions.onFailure)\r\n\t\t\t\tthrow new Error(\"subscribeOptions.timeout specified with no onFailure callback.\");\r\n\t\t\tif (typeof subscribeOptions.qos !== \"undefined\" \r\n\t\t\t\t&& !(subscribeOptions.qos === 0 || subscribeOptions.qos === 1 || subscribeOptions.qos === 2 ))\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [subscribeOptions.qos, \"subscribeOptions.qos\"]));\r\n\t\t\tclient.subscribe(filter, subscribeOptions);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Unsubscribe for messages, stop receiving messages sent to destinations described by the filter.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#unsubscribe\r\n\t\t * @function\r\n\t\t * @param {string} filter - describing the destinations to receive messages from.\r\n\t\t * @param {object} unsubscribeOptions - used to control the subscription\r\n\t\t * @param {object} unsubscribeOptions.invocationContext - passed to the onSuccess callback \r\n\t\t                                      or onFailure callback.\r\n\t\t * @param {function} unsubscribeOptions.onSuccess - called when the unsubscribe acknowledgement has been received from the server.\r\n\t\t *                                    A single response object parameter is passed to the \r\n\t\t *                                    onSuccess callback containing the following fields:\r\n\t\t *                                    <ol>\r\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.     \r\n\t\t *                                    </ol>\r\n\t\t * @param {function} unsubscribeOptions.onFailure called when the unsubscribe request has failed or timed out.\r\n\t\t *                                    A single response object parameter is passed to the onFailure callback containing the following fields:\r\n\t\t *                                    <ol>\r\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.       \r\n\t\t *                                    <li>errorCode - a number indicating the nature of the error.\r\n\t\t *                                    <li>errorMessage - text describing the error.      \r\n\t\t *                                    </ol>\r\n\t\t * @param {number} unsubscribeOptions.timeout - which, if present, determines the number of seconds\r\n\t\t *                                    after which the onFailure callback is called. The presence of\r\n\t\t *                                    a timeout does not prevent the onSuccess callback from being\r\n\t\t *                                    called when the unsubscribe completes\r\n\t\t * @throws {InvalidState} if the client is not in connected state.\r\n\t\t */\r\n\t\tthis.unsubscribe = function (filter, unsubscribeOptions) {\r\n\t\t\tif (typeof filter !== \"string\")\r\n\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\r\n\t\t\tunsubscribeOptions = unsubscribeOptions || {} ;\r\n\t\t\tvalidate(unsubscribeOptions,  {invocationContext:\"object\", \r\n\t\t\t\t\t\t\t\t\t\t   onSuccess:\"function\", \r\n\t\t\t\t\t\t\t\t\t\t   onFailure:\"function\",\r\n\t\t\t\t\t\t\t\t\t\t   timeout:\"number\"\r\n\t\t\t\t\t\t\t\t\t\t  });\r\n\t\t\tif (unsubscribeOptions.timeout && !unsubscribeOptions.onFailure)\r\n\t\t\t\tthrow new Error(\"unsubscribeOptions.timeout specified with no onFailure callback.\");\r\n\t\t\tclient.unsubscribe(filter, unsubscribeOptions);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Send a message to the consumers of the destination in the Message.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#send\r\n\t\t * @function \r\n\t\t * @param {string|Paho.MQTT.Message} topic - <b>mandatory</b> The name of the destination to which the message is to be sent. \r\n\t\t * \t\t\t\t\t   - If it is the only parameter, used as Paho.MQTT.Message object.\r\n\t\t * @param {String|ArrayBuffer} payload - The message data to be sent. \r\n\t\t * @param {number} qos The Quality of Service used to deliver the message.\r\n\t\t * \t\t<dl>\r\n\t\t * \t\t\t<dt>0 Best effort (default).\r\n\t\t *     \t\t\t<dt>1 At least once.\r\n\t\t *     \t\t\t<dt>2 Exactly once.     \r\n\t\t * \t\t</dl>\r\n\t\t * @param {Boolean} retained If true, the message is to be retained by the server and delivered \r\n\t\t *                     to both current and future subscriptions.\r\n\t\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages. \r\n\t\t *                     A received message has the retained boolean set to true if the message was published \r\n\t\t *                     with the retained boolean set to true\r\n\t\t *                     and the subscrption was made after the message has been published. \r\n\t\t * @throws {InvalidState} if the client is not connected.\r\n\t\t */   \r\n\t\tthis.send = function (topic,payload,qos,retained) {   \r\n\t\t\tvar message ;  \r\n\t\t\t\r\n\t\t\tif(arguments.length == 0){\r\n\t\t\t\tthrow new Error(\"Invalid argument.\"+\"length\");\r\n\r\n\t\t\t}else if(arguments.length == 1) {\r\n\r\n\t\t\t\tif (!(topic instanceof Message) && (typeof topic !== \"string\"))\r\n\t\t\t\t\tthrow new Error(\"Invalid argument:\"+ typeof topic);\r\n\r\n\t\t\t\tmessage = topic;\r\n\t\t\t\tif (typeof message.destinationName === \"undefined\")\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,\"Message.destinationName\"]));\r\n\t\t\t\tclient.send(message); \r\n\r\n\t\t\t}else {\r\n\t\t\t\t//parameter checking in Message object \r\n\t\t\t\tmessage = new Message(payload);\r\n\t\t\t\tmessage.destinationName = topic;\r\n\t\t\t\tif(arguments.length >= 3)\r\n\t\t\t\t\tmessage.qos = qos;\r\n\t\t\t\tif(arguments.length >= 4)\r\n\t\t\t\t\tmessage.retained = retained;\r\n\t\t\t\tclient.send(message); \r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Normal disconnect of this Messaging client from its server.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#disconnect\r\n\t\t * @function\r\n\t\t * @throws {InvalidState} if the client is already disconnected.     \r\n\t\t */\r\n\t\tthis.disconnect = function () {\r\n\t\t\tclient.disconnect();\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Get the contents of the trace log.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#getTraceLog\r\n\t\t * @function\r\n\t\t * @return {Object[]} tracebuffer containing the time ordered trace records.\r\n\t\t */\r\n\t\tthis.getTraceLog = function () {\r\n\t\t\treturn client.getTraceLog();\r\n\t\t}\r\n\t\t\r\n\t\t/** \r\n\t\t * Start tracing.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#startTrace\r\n\t\t * @function\r\n\t\t */\r\n\t\tthis.startTrace = function () {\r\n\t\t\tclient.startTrace();\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Stop tracing.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#stopTrace\r\n\t\t * @function\r\n\t\t */\r\n\t\tthis.stopTrace = function () {\r\n\t\t\tclient.stopTrace();\r\n\t\t};\r\n\r\n\t\tthis.isConnected = function() {\r\n\t\t\treturn client.connected;\r\n\t\t};\r\n\t};\r\n\r\n\tClient.prototype = {\r\n\t\tget host() { return this._getHost(); },\r\n\t\tset host(newHost) { this._setHost(newHost); },\r\n\t\t\t\r\n\t\tget port() { return this._getPort(); },\r\n\t\tset port(newPort) { this._setPort(newPort); },\r\n\r\n\t\tget path() { return this._getPath(); },\r\n\t\tset path(newPath) { this._setPath(newPath); },\r\n\t\t\t\r\n\t\tget clientId() { return this._getClientId(); },\r\n\t\tset clientId(newClientId) { this._setClientId(newClientId); },\r\n\r\n\t\tget onConnectionLost() { return this._getOnConnectionLost(); },\r\n\t\tset onConnectionLost(newOnConnectionLost) { this._setOnConnectionLost(newOnConnectionLost); },\r\n\r\n\t\tget onMessageDelivered() { return this._getOnMessageDelivered(); },\r\n\t\tset onMessageDelivered(newOnMessageDelivered) { this._setOnMessageDelivered(newOnMessageDelivered); },\r\n\t\t\r\n\t\tget onMessageArrived() { return this._getOnMessageArrived(); },\r\n\t\tset onMessageArrived(newOnMessageArrived) { this._setOnMessageArrived(newOnMessageArrived); },\r\n\r\n\t\tget trace() { return this._getTrace(); },\r\n\t\tset trace(newTraceFunction) { this._setTrace(newTraceFunction); }\t\r\n\r\n\t};\r\n\t\r\n\t/** \r\n\t * An application message, sent or received.\r\n\t * <p>\r\n\t * All attributes may be null, which implies the default values.\r\n\t * \r\n\t * @name Paho.MQTT.Message\r\n\t * @constructor\r\n\t * @param {String|ArrayBuffer} payload The message data to be sent.\r\n\t * <p>\r\n\t * @property {string} payloadString <i>read only</i> The payload as a string if the payload consists of valid UTF-8 characters.\r\n\t * @property {ArrayBuffer} payloadBytes <i>read only</i> The payload as an ArrayBuffer.\r\n\t * <p>\r\n\t * @property {string} destinationName <b>mandatory</b> The name of the destination to which the message is to be sent\r\n\t *                    (for messages about to be sent) or the name of the destination from which the message has been received.\r\n\t *                    (for messages received by the onMessage function).\r\n\t * <p>\r\n\t * @property {number} qos The Quality of Service used to deliver the message.\r\n\t * <dl>\r\n\t *     <dt>0 Best effort (default).\r\n\t *     <dt>1 At least once.\r\n\t *     <dt>2 Exactly once.     \r\n\t * </dl>\r\n\t * <p>\r\n\t * @property {Boolean} retained If true, the message is to be retained by the server and delivered \r\n\t *                     to both current and future subscriptions.\r\n\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages. \r\n\t *                     A received message has the retained boolean set to true if the message was published \r\n\t *                     with the retained boolean set to true\r\n\t *                     and the subscrption was made after the message has been published. \r\n\t * <p>\r\n\t * @property {Boolean} duplicate <i>read only</i> If true, this message might be a duplicate of one which has already been received. \r\n\t *                     This is only set on messages received from the server.\r\n\t *                     \r\n\t */\r\n\tvar Message = function (newPayload) {  \r\n\t\tvar payload;\r\n\t\tif (   typeof newPayload === \"string\" \r\n\t\t\t|| newPayload instanceof ArrayBuffer\r\n\t\t\t|| newPayload instanceof Int8Array\r\n\t\t\t|| newPayload instanceof Uint8Array\r\n\t\t\t|| newPayload instanceof Int16Array\r\n\t\t\t|| newPayload instanceof Uint16Array\r\n\t\t\t|| newPayload instanceof Int32Array\r\n\t\t\t|| newPayload instanceof Uint32Array\r\n\t\t\t|| newPayload instanceof Float32Array\r\n\t\t\t|| newPayload instanceof Float64Array\r\n\t\t   ) {\r\n\t\t\tpayload = newPayload;\r\n\t\t} else {\r\n\t\t\tthrow (format(ERROR.INVALID_ARGUMENT, [newPayload, \"newPayload\"]));\r\n\t\t}\r\n\r\n\t\tthis._getPayloadString = function () {\r\n\t\t\tif (typeof payload === \"string\")\r\n\t\t\t\treturn payload;\r\n\t\t\telse\r\n\t\t\t\treturn parseUTF8(payload, 0, payload.length); \r\n\t\t};\r\n\r\n\t\tthis._getPayloadBytes = function() {\r\n\t\t\tif (typeof payload === \"string\") {\r\n\t\t\t\tvar buffer = new ArrayBuffer(UTF8Length(payload));\r\n\t\t\t\tvar byteStream = new Uint8Array(buffer); \r\n\t\t\t\tstringToUTF8(payload, byteStream, 0);\r\n\r\n\t\t\t\treturn byteStream;\r\n\t\t\t} else {\r\n\t\t\t\treturn payload;\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar destinationName = undefined;\r\n\t\tthis._getDestinationName = function() { return destinationName; };\r\n\t\tthis._setDestinationName = function(newDestinationName) { \r\n\t\t\tif (typeof newDestinationName === \"string\")\r\n\t\t\t\tdestinationName = newDestinationName;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newDestinationName, \"newDestinationName\"]));\r\n\t\t};\r\n\t\t\t\t\r\n\t\tvar qos = 0;\r\n\t\tthis._getQos = function() { return qos; };\r\n\t\tthis._setQos = function(newQos) { \r\n\t\t\tif (newQos === 0 || newQos === 1 || newQos === 2 )\r\n\t\t\t\tqos = newQos;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(\"Invalid argument:\"+newQos);\r\n\t\t};\r\n\r\n\t\tvar retained = false;\r\n\t\tthis._getRetained = function() { return retained; };\r\n\t\tthis._setRetained = function(newRetained) { \r\n\t\t\tif (typeof newRetained === \"boolean\")\r\n\t\t\t\tretained = newRetained;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newRetained, \"newRetained\"]));\r\n\t\t};\r\n\t\t\r\n\t\tvar duplicate = false;\r\n\t\tthis._getDuplicate = function() { return duplicate; };\r\n\t\tthis._setDuplicate = function(newDuplicate) { duplicate = newDuplicate; };\r\n\t};\r\n\t\r\n\tMessage.prototype = {\r\n\t\tget payloadString() { return this._getPayloadString(); },\r\n\t\tget payloadBytes() { return this._getPayloadBytes(); },\r\n\t\t\r\n\t\tget destinationName() { return this._getDestinationName(); },\r\n\t\tset destinationName(newDestinationName) { this._setDestinationName(newDestinationName); },\r\n\t\t\r\n\t\tget qos() { return this._getQos(); },\r\n\t\tset qos(newQos) { this._setQos(newQos); },\r\n\r\n\t\tget retained() { return this._getRetained(); },\r\n\t\tset retained(newRetained) { this._setRetained(newRetained); },\r\n\r\n\t\tget duplicate() { return this._getDuplicate(); },\r\n\t\tset duplicate(newDuplicate) { this._setDuplicate(newDuplicate); }\r\n\t};\r\n\t   \r\n\t// Module contents.\r\n\treturn {\r\n\t\tClient: Client,\r\n\t\tMessage: Message\r\n\t};\r\n})(window);\r\nexports.Paho = Paho;"],"names":[],"mappings":"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"}